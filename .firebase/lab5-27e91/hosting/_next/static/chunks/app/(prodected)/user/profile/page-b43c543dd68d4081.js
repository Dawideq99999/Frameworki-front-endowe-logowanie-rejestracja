(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{3009:(e,t,a)=>{Promise.resolve().then(a.bind(a,2890))},2890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(5155),s=a(2115),o=a(9606),l=a(6046),d=a(1788),i=a(4565),n=a(7982),c=a(7058);function u(){let{user:e}=(0,d.A)(),t=(0,l.useRouter)(),{register:a,setValue:u,handleSubmit:m,watch:b,formState:{errors:h}}=(0,o.mN)({defaultValues:{street:"",city:"",zipCode:"",avatarColor:"#4682B4"}}),g=b("avatarColor");(0,s.useEffect)(()=>{let a=async()=>{try{let t=(0,c.H9)(n.db,"users",null==e?void 0:e.uid),a=await (0,c.x7)(t);if(a.exists()){let e=a.data();e.address&&(u("street",e.address.street||""),u("city",e.address.city||""),u("zipCode",e.address.zipCode||"")),e.avatar&&u("avatarColor",e.avatar.color||"#4682B4")}}catch(e){console.error("Błąd podczas pobierania danych użytkownika:",e)}};e?a():t.push("/notfound")},[e,t,u]);let y=async()=>{try{await (0,i.CI)(n.j2),t.push("/user/login")}catch(e){console.error("Błąd podczas wylogowania:",e)}},f=async t=>{try{let a=(0,c.H9)(n.db,"users",e.uid);await (0,c.BN)(a,{address:{street:t.street,city:t.city,zipCode:t.zipCode},avatar:{color:t.avatarColor}},{merge:!0}),alert("Dane zostały zaktualizowane!")}catch(e){console.error("Błąd podczas aktualizacji danych użytkownika:",e)}},x=((null==e?void 0:e.displayName)||(null==e?void 0:e.email)||"User").split(" ").map(e=>e.charAt(0)).join("").toUpperCase();return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-r from-teal-400 via-blue-500 to-indigo-600 text-white p-6",children:[(0,r.jsxs)("h1",{className:"text-5xl font-bold text-center mb-4",children:["Welcome, ",x]}),(0,r.jsx)("div",{className:"w-40 h-40 flex items-center justify-center rounded-full text-4xl font-bold shadow-lg mb-6",style:{backgroundColor:g},children:x}),(0,r.jsxs)("form",{onSubmit:m(f),className:"bg-white p-6 rounded-lg shadow-md w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"Update Address and Avatar"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"street",className:"block text-gray-700 font-semibold mb-2",children:"Street:"}),(0,r.jsx)("input",{id:"street",...a("street"),className:"p-2 bg-gray-100 text-gray-800 rounded-md focus:ring-2 focus:ring-blue-500 w-full"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-gray-700 font-semibold mb-2",children:"City:"}),(0,r.jsx)("input",{id:"city",...a("city"),className:"p-2 bg-gray-100 text-gray-800 rounded-md focus:ring-2 focus:ring-blue-500 w-full"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"zipCode",className:"block text-gray-700 font-semibold mb-2",children:"ZIP Code:"}),(0,r.jsx)("input",{id:"zipCode",...a("zipCode"),className:"p-2 bg-gray-100 text-gray-800 rounded-md focus:ring-2 focus:ring-blue-500 w-full"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"avatarColor",className:"block text-gray-700 font-semibold mb-2",children:"Avatar Color:"}),(0,r.jsx)("input",{id:"avatarColor",type:"color",...a("avatarColor"),className:"w-full h-10"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 transition",children:"Update Address and Avatar"})]}),(0,r.jsx)("button",{onClick:y,className:"mt-6 px-8 py-3 bg-red-600 text-white font-bold text-lg rounded-full shadow-md hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 transition duration-300",children:"Log Out"})]})}},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,AuthProvider:()=>i});var r=a(5155),s=a(2115),o=a(4565),l=a(7982);let d=(0,s.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=(0,o.hg)(l.j2,e=>{i(e),c(!1)});return()=>e()},[]),n)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Loading..."})}):(0,r.jsxs)(d.Provider,{value:{user:a},children:[t," "]})},n=()=>(0,s.useContext)(d)},7982:(e,t,a)=>{"use strict";a.d(t,{Ad:()=>n,GE:()=>c,db:()=>i,j2:()=>d,o6:()=>u});var r=a(9904),s=a(4565),o=a(7058);let l=(0,r.Wp)({apiKey:"AIzaSyCuZpWnRf0EgfAOq0axuhvZsbbTnIuT2Gw",authDomain:"lab5-27e91.firebaseapp.com",projectId:"lab5-27e91",storageBucket:"lab5-27e91.appspot.com",messagingSenderId:"703615843516",appId:"1:703615843516:web:6a7f9a725c1f4bd0ace4b9"}),d=(0,s.xI)(l),i=(0,o.aU)(l),n=async(e,t)=>{try{let a=await (0,s.eJ)(d,e,t);return console.log("Rejestracja zakończona sukcesem:",a.user),a.user}catch(e){throw console.error("Błąd rejestracji:",e.message),Error(e.message)}},c=async()=>{let e=[];try{let t=d.currentUser;if(!t)return console.error("Nie zalogowano użytkownika."),e;let a=(0,o.P)((0,o.rJ)(i,"articles"),(0,o._M)("userId","==",t.uid));return(await (0,o.GG)(a)).forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(e){throw console.error("Błąd pobierania artykuł\xf3w:",e),Error(e.message)}},u=async e=>{try{let t=d.currentUser;if(!t)throw Error("Użytkownik nie jest zalogowany.");let a={...e,userId:t.uid},r=await (0,o.gS)((0,o.rJ)(i,"articles"),a);console.log("Artykuł dodany z ID:",r.id)}catch(e){throw console.error("Błąd dodawania artykułu:",e.message),Error(e.message)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,512,778,533,441,517,358],()=>t(3009)),_N_E=e.O()}]);