(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{3841:(e,t,a)=>{Promise.resolve().then(a.bind(a,9274))},9274:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),l=a(7982),n=a(1788),o=a(6046),c=a(7058);let i=()=>{let{user:e}=(0,n.A)(),t=(0,o.useRouter)(),[a,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(!0),[f,b]=(0,s.useState)(null),[y,p]=(0,s.useState)("#4682B4");(0,s.useEffect)(()=>{e||t.push("/notfound")},[e,t]);let w=(0,s.useCallback)(async()=>{try{let t=(0,c.H9)(l.db,"users",null==e?void 0:e.uid),a=await (0,c.x7)(t);if(a.exists()){let e=a.data();e.avatar&&e.avatar.color&&p(e.avatar.color)}}catch(e){console.error("Error fetching avatar color:",e)}},[null==e?void 0:e.uid]),j=(0,s.useCallback)(async()=>{g(!0),b(null);try{let e=await (0,l.GE)();i(e)}catch(e){b("Failed to load articles."),console.error(e)}finally{g(!1)}},[]);(0,s.useEffect)(()=>{e&&(w(),j(),g(!1))},[e,w,j]);let v=async e=>{e.preventDefault(),g(!0);let t={title:d,content:x,date:new Date};try{await (0,l.o6)(t),u(""),m(""),j()}catch(e){b("Failed to add article."),console.error(e)}finally{g(!1)}},N=((null==e?void 0:e.displayName)||(null==e?void 0:e.email)||"User").split(" ").map(e=>e.charAt(0)).join("").toUpperCase();return h?(0,r.jsx)("div",{className:"text-center text-white",children:"Loading..."}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-r from-teal-400 via-blue-500 to-indigo-600 text-white p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 flex items-center justify-center rounded-full text-2xl font-bold shadow-lg mb-2",style:{backgroundColor:y},children:N}),(0,r.jsx)("h1",{className:"text-5xl font-bold text-center",children:"Articles"})]}),(0,r.jsxs)("form",{onSubmit:v,className:"bg-white p-6 rounded-lg shadow-md mb-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"Add Article"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("input",{type:"text",placeholder:"Enter title",value:d,onChange:e=>u(e.target.value),className:"p-2 bg-gray-100 text-gray-800 rounded-md focus:ring-2 focus:ring-blue-500 w-full",required:!0})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("textarea",{placeholder:"Enter content",value:x,onChange:e=>m(e.target.value),className:"p-2 bg-gray-100 text-gray-800 rounded-md focus:ring-2 focus:ring-blue-500 w-full",required:!0})}),(0,r.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 transition",children:h?"Adding...":"Add Article"})]}),f&&(0,r.jsx)("div",{className:"text-red-500 text-center mb-4",children:f}),(0,r.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:"Your Articles"}),h?(0,r.jsx)("div",{className:"text-center",children:"Loading..."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,r.jsxs)("div",{className:"p-4 bg-white text-gray-800 rounded-lg shadow-lg flex flex-col justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:e.content}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(1e3*e.date.seconds).toLocaleString()})]},e.id))})]})]})}},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,AuthProvider:()=>c});var r=a(5155),s=a(2115),l=a(4565),n=a(7982);let o=(0,s.createContext)(),c=e=>{let{children:t}=e,[a,c]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{c(e),d(!1)});return()=>e()},[]),i)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Loading..."})}):(0,r.jsxs)(o.Provider,{value:{user:a},children:[t," "]})},i=()=>(0,s.useContext)(o)},7982:(e,t,a)=>{"use strict";a.d(t,{Ad:()=>i,GE:()=>d,db:()=>c,j2:()=>o,o6:()=>u});var r=a(9904),s=a(4565),l=a(7058);let n=(0,r.Wp)({apiKey:"AIzaSyCuZpWnRf0EgfAOq0axuhvZsbbTnIuT2Gw",authDomain:"lab5-27e91.firebaseapp.com",projectId:"lab5-27e91",storageBucket:"lab5-27e91.appspot.com",messagingSenderId:"703615843516",appId:"1:703615843516:web:6a7f9a725c1f4bd0ace4b9"}),o=(0,s.xI)(n),c=(0,l.aU)(n),i=async(e,t)=>{try{let a=await (0,s.eJ)(o,e,t);return console.log("Rejestracja zakończona sukcesem:",a.user),a.user}catch(e){throw console.error("Błąd rejestracji:",e.message),Error(e.message)}},d=async()=>{let e=[];try{let t=o.currentUser;if(!t)return console.error("Nie zalogowano użytkownika."),e;let a=(0,l.P)((0,l.rJ)(c,"articles"),(0,l._M)("userId","==",t.uid));return(await (0,l.GG)(a)).forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(e){throw console.error("Błąd pobierania artykuł\xf3w:",e),Error(e.message)}},u=async e=>{try{let t=o.currentUser;if(!t)throw Error("Użytkownik nie jest zalogowany.");let a={...e,userId:t.uid},r=await (0,l.gS)((0,l.rJ)(c,"articles"),a);console.log("Artykuł dodany z ID:",r.id)}catch(e){throw console.error("Błąd dodawania artykułu:",e.message),Error(e.message)}}},6046:(e,t,a)=>{"use strict";var r=a(6658);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,512,778,441,517,358],()=>t(3841)),_N_E=e.O()}]);